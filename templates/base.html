{% load static %}
{% load i18n %}
{% load component_tags %}

<!DOCTYPE html>
<html>
<head>
    <link rel="apple-touch-icon" sizes="180x180" href="/static/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/img/favicon-16x16.png">
    <meta charset="utf-8">
    <title>{% block title %}USM Coach{% endblock %}</title>
    {% block styles %}{% endblock styles %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet"/>
    <script defer data-domain="usm.coach" src="https://plausible.tanssi.io/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/htmx.org@1.9.12/dist/htmx.min.js'></script>
    {% block scripts %}{% endblock scripts %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-print-css/css/bootstrap-print.min.css" media="print">

    {% comment %}
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/cjs/popper.js" integrity="sha256-AOt8NBezBzuBUiJRPeJ3FKVWAG/o6kppBMzhIYXgdg8=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/orgchart@3.1.1/dist/js/jquery.orgchart.min.js" integrity="sha256-I5TGaG4APCoP0G26U/eTmPINkJDfgGDkTYG1ri/RC3s=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/orgchart@3.1.1/src/css/jquery.orgchart.css" integrity="sha256-Ui/WIXlGswB4AjCrp5y1tGw9PX1Zse/r73xXfLb2BiM=" crossorigin="anonymous">
    {% endcomment %}
    {% component_css_dependencies %}

    <link rel="stylesheet" href="{% static 'css/styles.css' %}"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>
<body>
    {% for message in messages %}
    <div class="container-fluid p-0 d-print-none">
      <div class="alert {{ message.tags }} alert-dismissible m-0" role="alert" >
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
          <span aria-hidden="True">&times;</span>
        </button>
        {{ message }}
      </div>
    </div>
    {% endfor %}
  <div class="row g-0">
    <div class="col col-md-auto d-print-none" id="sidenav-container">
        {% block sidenav %}{% endblock %}
    </div>
    <div class="col">
    {% block header %}
    <div id="header">

      <nav class="navbar navbar-custom navbar-expand-md sticky-top navbar-dark bg-dark d-print-none">
        <div class="container-fluid">

        <a class="navbar-brand" href="/"><img height="45px" style="margin-left: 20px" src="{% static 'img/usm_coach_logo_blue_375x200.png' %}" alt="Logo"/></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse justify-content-start" id="navbarSupportedContent">
          <ul class="list-unstyled navbar-nav"> {% comment %}bootstrap 4 is broken, and does not allow styling this in the class {% endcomment %}
            {% if user.is_authenticated %}
            <li class="nav-item {% if "/app" in request.path %}active{% endif %}">
              <a class="nav-link" href="/app/">{% trans 'BPM Tool' %} <span class="badge bg-danger">beta</span></a>
            </li>
            {% for group in request.user.groups.all %}
                {% if group.name == 'XREF' %}
                <li class="nav-item {% if "/xref" in request.path %}active{% endif %}">
                  <a class="nav-link" href="/xref/">{% trans 'XREF tool' %} <span class="badge bg-danger">beta</span></a>
                </li>
                {% endif %}
            {% endfor %}
            {% endif %}
          </ul>
        </div>
        <div class="collapse navbar-collapse justify-content-end me-3" id="navbarSupportedContent">
          <ul class="list-unstyled navbar-nav"> {% comment %}bootstrap 4 is broken, and does not allow styling this in the class {% endcomment %}
            {% comment %}
            {% get_current_language as current_language %}
            {% get_available_languages as LANGUAGES %}
            {% get_language_info_list for LANGUAGES as languages %}
            {% for language in languages %}
              {% if current_language != language.code %}
                <li class="nav-item">
                  <a class="nav-link" href="{% url 'public.lang' language.code %}?next={{ request.path | urlencode }}"><img height="20" src="/static/img/lang_{{ language.code }}.png" alt="{{ language.code }}"/></a>
                </li>
              {% endif %}
            {% endfor %}
            {% endcomment %}

            {% if user.is_authenticated %}
              <li class="nav-item dropdown">

                <a class="dropdown-toggle" role="button" href="#" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                    {{ user }}
                </a>

                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuLink">
                  <li><a class="dropdown-item" href="{% url 'accounts:auth_logout' %}">{% trans "Log out" %}</a></li>
                  <li><a class="dropdown-item" href="{% url 'accounts:auth_password_change' %}">{% trans "Change password" %}</a></li>
                  {% if user.is_staff %}
                    <li><a class="dropdown-item" href="/admin">{% trans "Site admin" %}</a></li>
                  {% endif %}
                </ul>
              </li>
              {% comment %}
                  <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="{% url 'logout' %}">{% trans "Log out" %}</a></li>
                  </ul>
              {% endcomment %}
            {% else %}
              <li class="nav-item">
                <a class="nav-link" href="{% url 'accounts:auth_login' %}">{% trans "Log In" %}</a>
              </li>
            {% endif %}
          </ul>
        </div>
        </div>
      </nav>
    {% endblock header %}
    </div>

    <div id="content">
    {% block content %}
    {% endblock %}
    {% block modal %}
    {% endblock %}
    </div>

    {% block footer %}
    <footer class="page-footer d-print-none">
      <div class="container">
        <div class="row">
          <div class="col col-lg-3 col-md-12">
              <a href="/public/about/"><img src="{% static 'img/usm_coach_logo_wg_150x80.png' %}" width="150px" alt="Logo"/></a>
          </div>
          <div class="col col-lg-3 col-md-12">
            <h5>{{ contact_title }}</h5>
            {% translate "Email" %}<br/>
            info@usm.coach<br/><br/>
            {% translate "Phone" %}<br/>
            +358 40 329 3492
          </div>
          <div class="col col-lg-3 col-md-12">
            <h5>{{Â why_usm_title }}</h5>
            <ul class="list-unstyled">
              <li>{% translate "It is universal" %}</li>
              <li>... {% translate "unified" %}</li>
              <li>... {% translate "learnable" %}</li>
              <li>... {% translate "free" %}</li>
              <li>... {% translate "simple" %}</li>
              <li>... {% translate "non-redundant" %}</li>
              <li>... {% translate "open" %}</li>
            </ul>
          </div>
          <div class="col col-lg-3 col-md-12">
            <h5>{{ company_title }}</h5>
            <ul class="list-unstyled">
              <li><a href="/public/about/">{{ about_title }}</a></li>
              <li><a href="/public/services/">{{ services_title }}</a></li>
              <li><a href="/public/resources/">{{ resources_title }}</a></li>
              <li><a href="/public/contact/">{{ contact_title }}</a></li>
              <li><a href="/public/privacy-policy/">{{ privacy_policy_title }}</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-copyright">
        <div class="container">
            &#169; 2022 Copyright USM Coach
        </div>
      </div>
    </footer>
    {% endblock %}
    </div>

    {% block modal-scripts %}{% endblock %}
    {% block footer-scripts %}{% endblock %}
    {% block sidenav-scripts %}{% endblock %}
    <script src="/static/status_board/status_board.js"></script>
    {% component_js_dependencies %}
</body>
</html>
