{% extends "workflows/base.html" %}
{% load i18n %}
{% load breadcrumbs %}
{% block content %}
<section class="app">
<div class="container">
{% include 'workflows/fragments/service-tabs.html' %}
<h3 class="mt-3">{% trans 'Customers' %}</h3>
{% for customer in customers %}
  <p>
    <h5>{{ customer.name }} <a class="btn btn-primary open-popup" data-popup-url="{% url 'workflows:customer-update' tenant.id customer.id %}" href="{% url 'workflows:customer-update' tenant.id customer.id %}"><i class="bi bi-pencil"></i></a> <a class="btn btn-primary open-popup" data-popup-url="{% url 'workflows:customer-delete' tenant.id customer.id %}" href="{% url 'workflows:customer-delete' tenant.id customer.id %}"><i class="bi bi-trash3"></i></a></h5>
    <ul>
    {% for cs in customer.service_customers.all %}
        <li>
            <a href="{% url 'workflows:service-detail' tenant.id cs.service_id %}">{{ cs.service }}</a>
        </li>
    {% endfor %}
    </ul>
  </p>
{% empty %}
  <p>
    {% trans 'You have not defined any customers yet.' %}
  </p>
{% endfor %}
<p>
  <a class="btn btn-primary open-popup" data-popup-url="{% url 'workflows:customer-create' tenant.id %}" href="{% url 'workflows:customer-create' tenant.id %}">{% trans 'Create a new customer' %}</a>
</p>
</div>
</section>
{% include 'workflows/fragments/modal.html' %}
{% endblock %}
